
<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>4.4.Â Getting Object References With getattr</title>
        <link rev="made" href="josh@servercobra.com" />
        <meta name="generator" content="convert_to_jinja2.py" />
        <meta name="keywords" content="Python, Dive Into Python, tutorial, object-oriented, programming, documentation, book, free" />
        <meta name="description" content="Python from novice to pro" />
        <link rel="home" href="http://www.diveintopython.net/" title="Dive Into Python" />
        
        <link rel="up" href="index.html" title=" Chapter4.The Power Of Introspection" />
        
        
        
        <link rel="next" href="filtering_lists.html" title=" 4.5.Filtering Lists" />
        
         <link rel="stylesheet" href="../css/normalize.css">
         <link rel="stylesheet" href="../css/foundation.css">
         <link rel="stylesheet" href="../css/diveintopython.css" type="text/css" />


         <script src="../js/modernizr.js"></script>
    </head>
    <body>
        <div class="row">
            <div class="small-12 columns" id="Header">
                <div class="row">
                    <div class="small-11 columns">
                        
                        <td align="left" colspan="5" id="breadcrumb" valign="top">You are here: <a href="../index.html">Home</a>&#160;&gt;&#160;<a href="../toc/index.html">Dive Into Python</a>&#160;&gt;&#160;<a href="index.html">The Power Of Introspection</a>&#160;&gt;&#160;<span class="thispage">Getting Object References With getattr</span></td>
                        
                    </div>
                    <div class="small-1 columns">
                        
                        <td align="right" id="navigation" valign="top">&#160;&#160;&#160;<a href="built_in_functions.html" title="Prev: &#8220;Using type, str, dir, and Other Built-In Functions&#8221;">&lt;&lt;</a>&#160;&#160;&#160;<a href="filtering_lists.html" title="Next: &#8220;Filtering Lists&#8221;">&gt;&gt;</a></td>
                        
                    </div>
                </div>


                <div id="logocontainer">
                    <h1 id="logo"><a href="http://www.diveintopython.net/index.html" accesskey="1">Dive Into Python</a></h1>
                    <p id="tagline">Python from novice to pro</p>
                    <a href="http://www.amazon.com/gp/product/B001GIOFN8/ref=as_li_tf_tl?ie=UTF8&tag=diveintopython-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=B001GIOFN8"><img src="../images/amazon-buy-button.gif"></a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        <div class="toc">
<ul>
<li><span class="section"><a href="getattr.html#d0e9194">4.4.1. getattr with Modules</a></span></li>
<li><span class="section"><a href="getattr.html#d0e9362">4.4.2. getattr As a Dispatcher</a></span></li>
</ul>
</div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        <div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title"><a name="apihelper.getattr"></a>4.4.&#160;Getting Object References With <tt class="function">getattr</tt></h2>
</div>
</div>
<div></div>
</div>
<div class="toc">
<ul>
<li><span class="section"><a href="getattr.html#d0e9194">4.4.1. getattr with Modules</a></span></li>
<li><span class="section"><a href="getattr.html#d0e9362">4.4.2. getattr As a Dispatcher</a></span></li>
</ul>
</div>
<div class="abstract">
<p>You already know that <a href="../getting_to_know_python/everything_is_an_object.html" title="2.4.&#160;Everything Is an Object"><span class="application">Python</span> functions are objects</a>.  What you don't know is that you can get a reference to a function without knowing its name until run-time, by using the
               <tt class="function">getattr</tt> function.
            </p>
</div>
<div class="example"><a name="apihelper.getattr.intro"></a><h3 class="title">Example&#160;4.10.&#160;Introducing <tt class="function">getattr</tt></h3><pre class="screen"><tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">li = [<span class="pystring">"Larry"</span>, <span class="pystring">"Curly"</span>]</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">li.pop</span>                       <a name="apihelper.getattr.1.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
<span class="computeroutput">&lt;built-in method pop of list object at 010DF884&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">getattr(li, <span class="pystring">"pop"</span>)</span>           <a name="apihelper.getattr.1.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
<span class="computeroutput">&lt;built-in method pop of list object at 010DF884&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">getattr(li, <span class="pystring">"append"</span>)(<span class="pystring">"Moe"</span>)</span> <a name="apihelper.getattr.1.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">li</span>
<span class="computeroutput">["Larry", "Curly", "Moe"]</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">getattr({}, <span class="pystring">"clear"</span>)</span>         <a name="apihelper.getattr.1.4"></a><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12">
<span class="computeroutput">&lt;built-in method clear of dictionary object at 00F113D4&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">getattr((), <span class="pystring">"pop"</span>)</span>           <a name="apihelper.getattr.1.5"></a><img alt="5" border="0" height="12" src="../images/callouts/5.png" width="12">
<span class="traceback">Traceback (innermost last):
  File "&lt;interactive input&gt;", line 1, in ?
AttributeError: 'tuple' object has no attribute 'pop'</span></img></img></img></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.1.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">This gets a reference to the <tt class="function">pop</tt> method of the list.  Note that this is not calling the <tt class="function">pop</tt> method; that would be <tt class="literal">li.pop()</tt>.  This is the method itself.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.1.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">This also returns a reference to the <tt class="function">pop</tt> method, but this time, the method name is specified as a string argument to the <tt class="function">getattr</tt> function.  <tt class="function">getattr</tt> is an incredibly useful built-in function that returns any attribute of any object.  In this case, the object is a list,
                        and the attribute is the <tt class="function">pop</tt> method.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.1.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">In case it hasn't sunk in just how incredibly useful this is, try this: the return value of <tt class="function">getattr</tt> <span class="emphasis"><em>is</em></span> the method, which you can then call just as if you had said <tt class="literal">li.append("Moe")</tt> directly.  But you didn't call the function directly; you specified the function name as a string instead.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.1.4"><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12"/></a>
</td>
<td align="left" valign="top"><tt class="function">getattr</tt> also works on dictionaries.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.1.5"><img alt="5" border="0" height="12" src="../images/callouts/5.png" width="12"/></a>
</td>
<td align="left" valign="top">In theory, <tt class="function">getattr</tt> would work on tuples, except that <a href="../native_data_types/tuples.html#odbchelper.tuplemethods" title="Example&#160;3.16.&#160;Tuples Have No Methods">tuples have no methods</a>, so <tt class="function">getattr</tt> will raise an exception no matter what attribute name you give.
                     </td>
</tr>
</table>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="d0e9194"></a>4.4.1.&#160;<tt class="function">getattr</tt> with Modules
                     </h3>
</div>
</div>
<div></div>
</div>
<p><tt class="function">getattr</tt> isn't just for built-in datatypes.  It also works on modules.
            </p>
<div class="example"><a name="apihelper.getattr.example"></a><h3 class="title">Example&#160;4.11.&#160;The <tt class="function">getattr</tt> Function in <tt class="filename">apihelper.py</tt></h3><pre class="screen"><tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput"><span class="pykeyword">import</span> odbchelper</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">odbchelper.buildConnectionString</span>             <a name="apihelper.getattr.2.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
<span class="computeroutput">&lt;function buildConnectionString at 00D18DD4&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">getattr(odbchelper, <span class="pystring">"buildConnectionString"</span>)</span> <a name="apihelper.getattr.2.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
<span class="computeroutput">&lt;function buildConnectionString at 00D18DD4&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">object = odbchelper</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">method = <span class="pystring">"buildConnectionString"</span></span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">getattr(object, method)</span>                      <a name="apihelper.getattr.2.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
<span class="computeroutput">&lt;function buildConnectionString at 00D18DD4&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">type(getattr(object, method))</span>                <a name="apihelper.getattr.2.4"></a><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12">
<span class="computeroutput">&lt;type 'function'&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput"><span class="pykeyword">import</span> types</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">type(getattr(object, method)) == types.FunctionType</span>
<span class="computeroutput">True</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">callable(getattr(object, method))</span>            <a name="apihelper.getattr.2.5"></a><img alt="5" border="0" height="12" src="../images/callouts/5.png" width="12">
<span class="computeroutput">True</span></img></img></img></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.2.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">This returns a reference to the <tt class="function">buildConnectionString</tt> function in the <tt class="filename">odbchelper</tt> module, which you studied in <a href="../getting_to_know_python/index.html" title="Chapter&#160;2.&#160;Your First Python Program">Chapter&#160;2, <i>Your First Python Program</i></a>.  (The hex address you see is specific to my machine; your output will be different.)
                        </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.2.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">Using <tt class="function">getattr</tt>, you can get the same reference to the same function.  In general, <tt class="literal"><tt class="function">getattr</tt>(<i class="replaceable">object</i>, "<i class="replaceable">attribute</i>")</tt> is equivalent to <tt class="literal"><i class="replaceable">object</i>.<i class="replaceable">attribute</i></tt>.  If <i class="replaceable"><tt>object</tt></i> is a module, then <i class="replaceable"><tt>attribute</tt></i> can be anything defined in the module: a function, class, or global variable.
                        </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.2.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">And this is what you actually use in the <tt class="function">info</tt> function.  <tt class="varname">object</tt> is passed into the function as an argument; <tt class="varname">method</tt> is a string which is the name of a method or function.
                        </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.2.4"><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12"/></a>
</td>
<td align="left" valign="top">In this case, <tt class="varname">method</tt> is the name of a function, which you can prove by getting its <a href="built_in_functions.html#apihelper.type.intro" title="Example&#160;4.5.&#160;Introducing type"><tt class="function">type</tt></a>.
                        </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.2.5"><img alt="5" border="0" height="12" src="../images/callouts/5.png" width="12"/></a>
</td>
<td align="left" valign="top">Since <tt class="varname">method</tt> is a function, it is <a href="built_in_functions.html#apihelper.builtin.callable" title="Example&#160;4.8.&#160;Introducing callable">callable</a>.
                        </td>
</tr>
</table>
</div>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="d0e9362"></a>4.4.2.&#160;<tt class="function">getattr</tt> As a Dispatcher
                     </h3>
</div>
</div>
<div></div>
</div>
<p>A common usage pattern of <tt class="function">getattr</tt> is as a dispatcher.  For example, if you had a program that could output data in a variety of different formats, you could
               define separate functions for each output format and use a single dispatch function to call the right one.
            </p>
<p>For example, let's imagine a program that prints site statistics in <span class="acronym">HTML</span>, <span class="acronym">XML</span>, and plain text formats.  The choice of output format could be specified on the command line, or stored in a configuration
               file.  A <tt class="filename">statsout</tt> module defines three functions, <tt class="function">output_html</tt>, <tt class="function">output_xml</tt>, and <tt class="function">output_text</tt>.  Then the main program defines a single output function, like this:
            </p>
<div class="example"><a name="apihelper.getattr.dispatch"></a><h3 class="title">Example&#160;4.12.&#160;Creating a Dispatcher with <tt class="function">getattr</tt></h3><pre class="programlisting"><span class="pykeyword">
import</span> statsout

<span class="pykeyword">def</span><span class="pyclass"> output</span>(data, format=<span class="pystring">"text"</span>):                              <a name="apihelper.getattr.3.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
    output_function = getattr(statsout, <span class="pystring">"output_%s"</span> % format) <a name="apihelper.getattr.3.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
    <span class="pykeyword">return</span> output_function(data)                              <a name="apihelper.getattr.3.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
</img></img></img></pre></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.3.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">The <tt class="function">output</tt> function takes one required argument, <tt class="varname">data</tt>, and one optional argument, <tt class="varname">format</tt>.  If <tt class="varname">format</tt> is not specified, it defaults to <tt class="literal">text</tt>, and you will end up calling the plain text output function.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.3.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">You concatenate the <tt class="varname">format</tt> argument with "output_" to produce a function name, and then go get that function from the <tt class="filename">statsout</tt> module.  This allows you to easily extend the program later to support other output formats, without changing this dispatch
                        function.  Just add another function to <tt class="filename">statsout</tt> named, for instance, <tt class="function">output_pdf</tt>, and pass "pdf" as the <tt class="varname">format</tt> into the <tt class="function">output</tt> function.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.3.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">Now you can simply call the output function in the same way as any other function.  The <tt class="varname">output_function</tt> variable is a reference to the appropriate function from the <tt class="filename">statsout</tt> module.
                     </td>
</tr>
</table>
</div>
<p>Did you see the bug in the previous example?  This is a very loose coupling of strings and functions, and there is no error
               checking.  What happens if the user passes in a format that doesn't have a corresponding function defined in <tt class="filename">statsout</tt>?  Well, <tt class="function">getattr</tt> will return <tt class="literal">None</tt>, which will be assigned to <tt class="varname">output_function</tt> instead of a valid function, and the next line that attempts to call that function will crash and raise an exception.  That's
               bad.
            </p>
<p>Luckily, <tt class="function">getattr</tt> takes an optional third argument, a default value.
            </p>
<div class="example"><a name="apihelper.getattr.default"></a><h3 class="title">Example&#160;4.13.&#160;<tt class="function">getattr</tt> Default Values
               </h3><pre class="programlisting"><span class="pykeyword">
import</span> statsout

<span class="pykeyword">def</span><span class="pyclass"> output</span>(data, format=<span class="pystring">"text"</span>):
    output_function = getattr(statsout, <span class="pystring">"output_%s"</span> % format, statsout.output_text)
    <span class="pykeyword">return</span> output_function(data) <a name="apihelper.getattr.4.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
</img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#apihelper.getattr.4.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">This function call is guaranteed to work, because you added a third argument to the call to <tt class="function">getattr</tt>.  The third argument is a default value that is returned if the attribute or method specified by the second argument wasn't
                           found.
                        </td>
</tr>
</table>
</div>
</div>
<p>As you can see, <tt class="function">getattr</tt> is quite powerful.  It is the heart of introspection, and you'll see even more powerful examples of it in later chapters.
            </p>
</div>
</div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        <table border="0" cellpadding="0" cellspacing="0" class="Footer" summary="" width="100%">
<tr>
<td align="left" width="35%"><br><a class="NavigationArrow" href="built_in_functions.html">&lt;&lt;&#160;Using type, str, dir, and Other Built-In Functions</a></br></td>
<td align="center" width="30%"><br>&#160;<span class="divider">|</span>&#160;<a href="index.html#apihelper.divein" title="4.1.&#160;Diving In">1</a> <span class="divider">|</span> <a href="optional_arguments.html" title="4.2.&#160;Using Optional and Named Arguments">2</a> <span class="divider">|</span> <a href="built_in_functions.html" title="4.3.&#160;Using type, str, dir, and Other Built-In Functions">3</a> <span class="divider">|</span> <span class="thispage">4</span> <span class="divider">|</span> <a href="filtering_lists.html" title="4.5.&#160;Filtering Lists">5</a> <span class="divider">|</span> <a href="and_or.html" title="4.6.&#160;The Peculiar Nature of and and or">6</a> <span class="divider">|</span> <a href="lambda_functions.html" title="4.7.&#160;Using lambda Functions">7</a> <span class="divider">|</span> <a href="all_together.html" title="4.8.&#160;Putting It All Together">8</a> <span class="divider">|</span> <a href="summary.html" title="4.9.&#160;Summary">9</a>&#160;<span class="divider">|</span>&#160;
            </br></td>
<td align="right" width="35%"><br><a class="NavigationArrow" href="filtering_lists.html">Filtering Lists&#160;&gt;&gt;</a></br></td>
</tr>
<tr>
<td colspan="3"><br/></td>
</tr>
</table>
        <!-- Footer -->
<div class="Footer">
    <p><a href="https://github.com/pcsforeducation/diveintopython/issues?sort=created&state=open">Report issues<img style="margin-left:10px" height="40" src="../images/logo_github.png"></a></p>
    <p class="copyright">Copyright &copy; 2000, 2001, 2002, 2003, 2004 <a href="mailto:josh@servercobra.com">Mark Pilgrim</a>. Maintained by Josh Gachnang.</p>
</div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1879314568120827";
/* DiveIntoPython */
google_ad_slot = "8002881514";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<!-- End Footer -->
            </div>
        </div>
        <!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9740779-18']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google Analytics -->
        <script src="../js/jquery.js"></script>
        <script src="../js/foundation.min.js"></script>
        <script>
          $(document).foundation();
        </script>
    </body>
</html>