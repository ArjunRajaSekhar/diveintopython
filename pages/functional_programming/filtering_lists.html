
<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>16.3.Â Filtering lists revisited</title>
        <link rev="made" href="josh@servercobra.com" />
        <meta name="generator" content="convert_to_jinja2.py" />
        <meta name="keywords" content="Python, Dive Into Python, tutorial, object-oriented, programming, documentation, book, free" />
        <meta name="description" content="Python from novice to pro" />
        <link rel="home" href="http://www.diveintopython.net/" title="Dive Into Python" />
        
        <link rel="up" href="index.html" title=" Chapter16.Functional Programming" />
        
        
        
        <link rel="next" href="mapping_lists.html" title=" 16.4.Mapping lists revisited" />
        
         <link rel="stylesheet" href="../css/normalize.css">
         <link rel="stylesheet" href="../css/foundation.css">
         <link rel="stylesheet" href="../css/diveintopython.css" type="text/css" />


         <script src="../js/modernizr.js"></script>
    </head>
    <body>
        <div class="row">
            <div class="small-12 columns" id="Header">
                <div class="row">
                    <div class="small-11 columns">
                        
                        <td align="left" colspan="5" id="breadcrumb" valign="top">You are here: <a href="../index.html">Home</a>&#160;&gt;&#160;<a href="../toc/index.html">Dive Into Python</a>&#160;&gt;&#160;<a href="index.html">Functional Programming</a>&#160;&gt;&#160;<span class="thispage">Filtering lists revisited</span></td>
                        
                    </div>
                    <div class="small-1 columns">
                        
                        <td align="right" id="navigation" valign="top">&#160;&#160;&#160;<a href="finding_the_path.html" title="Prev: &#8220;Finding the path&#8221;">&lt;&lt;</a>&#160;&#160;&#160;<a href="mapping_lists.html" title="Next: &#8220;Mapping lists revisited&#8221;">&gt;&gt;</a></td>
                        
                    </div>
                </div>


                <div id="logocontainer">
                    <h1 id="logo"><a href="http://www.diveintopython.net/index.html" accesskey="1">Dive Into Python</a></h1>
                    <p id="tagline">Python from novice to pro</p>
                    <a href="http://www.amazon.com/gp/product/B001GIOFN8/ref=as_li_tf_tl?ie=UTF8&tag=diveintopython-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=B001GIOFN8"><img src="../images/amazon-buy-button.gif"></a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        <div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title"><a name="regression.filter"></a>16.3.&#160;Filtering lists revisited
                  </h2>
</div>
</div>
<div></div>
</div>
<div class="abstract">
<p>You're already familiar with <a href="../power_of_introspection/filtering_lists.html" title="4.5.&#160;Filtering Lists">using list comprehensions to filter lists</a>.  There is another way to accomplish this same thing, which some people feel is more expressive.
            </p>
</div>
<p><span class="application">Python</span> has a built-in <tt class="function">filter</tt> function which takes two arguments, a function and a list, and returns a list.<sup>[<a href="#ftn.d0e35697" name="d0e35697">7</a>]</sup>  The function passed as the first argument to <tt class="function">filter</tt> must itself take one argument, and the list that <tt class="function">filter</tt> returns will contain all the elements from the list passed to <tt class="function">filter</tt> for which the function passed to <tt class="function">filter</tt> returns true.
         </p>
<p>Got all that?  It's not as difficult as it sounds.</p>
<div class="example"><a name="d0e35724"></a><h3 class="title">Example&#160;16.7.&#160;Introducing <tt class="function">filter</tt></h3><pre class="screen">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput"><span class="pykeyword">def</span><span class="pyclass"> odd</span>(n):</span>                 <a name="regression.filter.1.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
<tt class="prompt">...     </tt><span class="userinput"><span class="pykeyword">return</span> n % 2</span>
<tt class="prompt">...     </tt>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">li = [1, 2, 3, 5, 9, 10, 256, -3]</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">filter(odd, li)</span>             <a name="regression.filter.1.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
<span class="computeroutput">[1, 3, 5, 9, -3]</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">[e <span class="pykeyword">for</span> e <span class="pykeyword">in</span> li <span class="pykeyword">if</span> odd(e)]</span>   <a name="regression.filter.1.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">filteredList = []</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput"><span class="pykeyword">for</span> n <span class="pykeyword">in</span> li:</span>                <a name="regression.filter.1.4"></a><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12">
<tt class="prompt">...     </tt><span class="userinput"><span class="pykeyword">if</span> odd(n):</span>
<tt class="prompt">...     </tt><span class="userinput">    filteredList.append(n)</span>
<tt class="prompt">...     </tt>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">filteredList</span>
<span class="computeroutput">[1, 3, 5, 9, -3]</span></img></img></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.1.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top"><tt class="function">odd</tt> uses the built-in mod function &#8220;<span class="quote"><tt class="literal">%</tt></span>&#8221; to return <tt class="constant">True</tt> if <tt class="varname">n</tt> is odd and <tt class="constant">False</tt> if <tt class="varname">n</tt> is even.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.1.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top"><tt class="function">filter</tt> takes two arguments, a function (<tt class="function">odd</tt>) and a list (<tt class="varname">li</tt>).  It loops through the list and calls <tt class="function">odd</tt> with each element.  If <tt class="function">odd</tt> returns a true value (remember, any non-zero value is true in <span class="application">Python</span>), then the element is included in the returned list, otherwise it is filtered out.  The result is a list of only the odd
                        numbers from the original list, in the same order as they appeared in the original.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.1.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">You could accomplish the same thing using list comprehensions, as you saw in <a href="../power_of_introspection/filtering_lists.html" title="4.5.&#160;Filtering Lists">Section&#160;4.5, &#8220;Filtering Lists&#8221;</a>.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.1.4"><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12"/></a>
</td>
<td align="left" valign="top">You could also accomplish the same thing with a <tt class="literal">for</tt> loop.  Depending on your programming background, this may seem more &#8220;<span class="quote">straightforward</span>&#8221;, but functions like <tt class="function">filter</tt> are much more expressive.  Not only is it easier to write, it's easier to read, too.  Reading the <tt class="literal">for</tt> loop is like standing too close to a painting; you see all the details, but it may take a few seconds to be able to step
                        back and see the bigger picture: &#8220;<span class="quote">Oh, you're just filtering the list!</span>&#8221;
                     </td>
</tr>
</table>
</div>
</div>
<div class="example"><a name="d0e35864"></a><h3 class="title">Example&#160;16.8.&#160;<tt class="function">filter</tt> in <tt class="filename">regression.py</tt></h3><pre class="programlisting">
    files = os.listdir(path)                                <a name="regression.filter.2.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
    test = re.compile(<span class="pystring">"test\.py$"</span>, re.IGNORECASE)           <a name="regression.filter.2.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
    files = filter(test.search, files)                      <a name="regression.filter.2.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.2.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">As you saw in <a href="finding_the_path.html" title="16.2.&#160;Finding the path">Section&#160;16.2, &#8220;Finding the path&#8221;</a>, <tt class="varname">path</tt> may contain the full or partial pathname of the directory of the currently running script, or it may contain an empty string
                        if the script is being run from the current directory.  Either way, <tt class="varname">files</tt> will end up with the names of the files in the same directory as this script you're running.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.2.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">This is a compiled regular expression.  As you saw in <a href="../refactoring/refactoring.html" title="15.3.&#160;Refactoring">Section&#160;15.3, &#8220;Refactoring&#8221;</a>, if you're going to use the same regular expression over and over, you should compile it for faster performance.  The compiled
                        object has a <tt class="function">search</tt> method which takes a single argument, the string to search.  If the regular expression matches the string, the <tt class="function">search</tt> method returns a <tt class="classname">Match</tt> object containing information about the regular expression match; otherwise it returns <tt class="literal">None</tt>, the <span class="application">Python</span> null value.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.2.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">For each element in the <tt class="varname">files</tt> list, you're going to call the <tt class="function">search</tt> method of the compiled regular expression object, <tt class="varname">test</tt>.  If the regular expression matches, the method will return a <tt class="classname">Match</tt> object, which <span class="application">Python</span> considers to be true, so the element will be included in the list returned by <tt class="function">filter</tt>.  If the regular expression does not match, the <tt class="function">search</tt> method will return <tt class="literal">None</tt>, which <span class="application">Python</span> considers to be false, so the element will not be included.
                     </td>
</tr>
</table>
</div>
</div>
<p><b>Historical note.&#160;</b>Versions of <span class="application">Python</span> prior to 2.0 did not have <a href="../native_data_types/mapping_lists.html" title="3.6.&#160;Mapping Lists">list comprehensions</a>, so you couldn't <a href="../power_of_introspection/filtering_lists.html" title="4.5.&#160;Filtering Lists">filter using list comprehensions</a>; the <tt class="function">filter</tt> function was the only game in town.  Even with the introduction of list comprehensions in 2.0, some people still prefer the
            old-style <tt class="function">filter</tt> (and its companion function, <tt class="function">map</tt>, which you'll see later in this chapter).  Both techniques work at the moment, so which one you use is a matter of style.
             There is discussion that <tt class="function">map</tt> and <tt class="function">filter</tt> might be deprecated in a future version of <span class="application">Python</span>, but no decision has been made.
         </p>
<div class="example"><a name="d0e35972"></a><h3 class="title">Example&#160;16.9.&#160;Filtering using list comprehensions instead</h3><pre class="programlisting">
    files = os.listdir(path)                               
    test = re.compile(<span class="pystring">"test\.py$"</span>, re.IGNORECASE)          
    files = [f <span class="pykeyword">for</span> f <span class="pykeyword">in</span> files <span class="pykeyword">if</span> test.search(f)] <a name="regression.filter.3.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#regression.filter.3.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">This will accomplish exactly the same result as using the <tt class="function">filter</tt> function.  Which way is more expressive?  That's up to you.
                     </td>
</tr>
</table>
</div>
</div>
<div class="footnotes">
<h3 class="footnotetitle">Footnotes</h3>
<div class="footnote">
<p><sup>[<a href="#d0e35697" name="ftn.d0e35697">7</a>] </sup>Technically, the second argument to <tt class="function">filter</tt> can be any sequence, including lists, tuples, and custom classes that act like lists by defining the <tt class="function">__getitem__</tt> special method.  If possible, <tt class="function">filter</tt> will return the same datatype as you give it, so filtering a list returns a list, but filtering a tuple returns a tuple.
               </p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        <table border="0" cellpadding="0" cellspacing="0" class="Footer" summary="" width="100%">
<tr>
<td align="left" width="35%"><br><a class="NavigationArrow" href="finding_the_path.html">&lt;&lt;&#160;Finding the path</a></br></td>
<td align="center" width="30%"><br>&#160;<span class="divider">|</span>&#160;<a href="index.html#regression.divein" title="16.1.&#160;Diving in">1</a> <span class="divider">|</span> <a href="finding_the_path.html" title="16.2.&#160;Finding the path">2</a> <span class="divider">|</span> <span class="thispage">3</span> <span class="divider">|</span> <a href="mapping_lists.html" title="16.4.&#160;Mapping lists revisited">4</a> <span class="divider">|</span> <a href="data_centric.html" title="16.5.&#160;Data-centric programming">5</a> <span class="divider">|</span> <a href="dynamic_import.html" title="16.6.&#160;Dynamically importing modules">6</a> <span class="divider">|</span> <a href="all_together.html" title="16.7.&#160;Putting it all together">7</a> <span class="divider">|</span> <a href="summary.html" title="16.8.&#160;Summary">8</a>&#160;<span class="divider">|</span>&#160;
            </br></td>
<td align="right" width="35%"><br><a class="NavigationArrow" href="mapping_lists.html">Mapping lists revisited&#160;&gt;&gt;</a></br></td>
</tr>
<tr>
<td colspan="3"><br/></td>
</tr>
</table>
        <!-- Footer -->
<div class="Footer">
    <p><a href="https://github.com/pcsforeducation/diveintopython/issues?sort=created&state=open">Report issues<img style="margin-left:10px" height="40" src="../images/logo_github.png"></a></p>
    <p class="copyright">Copyright &copy; 2000, 2001, 2002, 2003, 2004 <a href="mailto:josh@servercobra.com">Mark Pilgrim</a>. Maintained by Josh Gachnang.</p>
</div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1879314568120827";
/* DiveIntoPython */
google_ad_slot = "8002881514";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<!-- End Footer -->
            </div>
        </div>
        <!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9740779-18']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google Analytics -->
        <script src="../js/jquery.js"></script>
        <script src="../js/foundation.min.js"></script>
        <script>
          $(document).foundation();
        </script>
    </body>
</html>