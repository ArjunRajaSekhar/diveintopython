
<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>16.2.Â Finding the path</title>
        <link rev="made" href="josh@servercobra.com" />
        <meta name="generator" content="convert_to_jinja2.py" />
        <meta name="keywords" content="Python, Dive Into Python, tutorial, object-oriented, programming, documentation, book, free" />
        <meta name="description" content="Python from novice to pro" />
        <link rel="home" href="http://www.diveintopython.net/" title="Dive Into Python" />
        
        <link rel="up" href="index.html" title=" Chapter16.Functional Programming" />
        
        
        
        <link rel="next" href="filtering_lists.html" title=" 16.3.Filtering lists revisited" />
        
         <link rel="stylesheet" href="../css/normalize.css">
         <link rel="stylesheet" href="../css/foundation.css">
         <link rel="stylesheet" href="../css/diveintopython.css" type="text/css" />


         <script src="../js/modernizr.js"></script>
    </head>
    <body>
        <div class="row">
            <div class="small-12 columns" id="Header">
                <div class="row">
                    <div class="small-11 columns">
                        
                        <td align="left" colspan="5" id="breadcrumb" valign="top">You are here: <a href="../index.html">Home</a>&#160;&gt;&#160;<a href="../toc/index.html">Dive Into Python</a>&#160;&gt;&#160;<a href="index.html">Functional Programming</a>&#160;&gt;&#160;<span class="thispage">Finding the path</span></td>
                        
                    </div>
                    <div class="small-1 columns">
                        
                        <td align="right" id="navigation" valign="top">&#160;&#160;&#160;<a href="index.html" title="Prev: &#8220;Functional Programming&#8221;">&lt;&lt;</a>&#160;&#160;&#160;<a href="filtering_lists.html" title="Next: &#8220;Filtering lists revisited&#8221;">&gt;&gt;</a></td>
                        
                    </div>
                </div>


                <div id="logocontainer">
                    <h1 id="logo"><a href="http://www.diveintopython.net/index.html" accesskey="1">Dive Into Python</a></h1>
                    <p id="tagline">Python from novice to pro</p>
                    <a href="http://www.amazon.com/gp/product/B001GIOFN8/ref=as_li_tf_tl?ie=UTF8&tag=diveintopython-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=B001GIOFN8"><img src="../images/amazon-buy-button.gif"></a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        <div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title"><a name="regression.path"></a>16.2.&#160;Finding the path
                  </h2>
</div>
</div>
<div></div>
</div>
<div class="abstract">
<p>When running <span class="application">Python</span> scripts from the command line, it is sometimes useful to know where the currently running script is located on disk.
            </p>
</div>
<p>This is one of those obscure little tricks that is virtually impossible to figure out on your own, but simple to remember
            once you see it.  The key to it is <tt class="literal">sys.argv</tt>.  As you saw in <a href="../xml_processing/index.html" title="Chapter&#160;9.&#160;XML Processing">Chapter&#160;9, <i>XML Processing</i></a>, this is a list that holds the list of command-line arguments.  However, it also holds the name of the running script, exactly
            as it was called from the command line, and this is enough information to determine its location.
         </p>
<div class="example"><a name="d0e35359"></a><h3 class="title">Example&#160;16.3.&#160;<tt class="filename">fullpath.py</tt></h3>
<p>If you have not already done so, you can <a href="http://diveintopython.org/download/diveintopython-examples-5.4.zip" title="Download example scripts">download this and other examples</a> used in this book.
            </p><pre class="programlisting"><span class="pykeyword">
import</span> sys, os

<span class="pykeyword">print</span> <span class="pystring">'sys.argv[0] ='</span>, sys.argv[0]             <a name="regression.path.1.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
pathname = os.path.dirname(sys.argv[0])        <a name="regression.path.1.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"><span class="pykeyword">
print</span> <span class="pystring">'path ='</span>, pathname
<span class="pykeyword">print</span> <span class="pystring">'full path ='</span>, os.path.abspath(pathname) <a name="regression.path.1.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.1.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">Regardless of how you run a script, <tt class="literal">sys.argv[0]</tt> will always contain the name of the script, exactly as it appears on the command line.  This may or may not include any path
                        information, as you'll see shortly.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.1.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top"><tt class="function">os.path.dirname</tt> takes a filename as a string and returns the directory path portion.  If the given filename does not include any path information,
                        <tt class="function">os.path.dirname</tt> returns an empty string.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.1.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top"><tt class="function">os.path.abspath</tt> is the key here.  It takes a pathname, which can be partial or even blank, and returns a fully qualified pathname.
                     </td>
</tr>
</table>
</div>
</div>
<p><tt class="function">os.path.abspath</tt> deserves further explanation.  It is very flexible; it can take any kind of pathname.
         </p>
<div class="example"><a name="d0e35399"></a><h3 class="title">Example&#160;16.4.&#160;Further explanation of <tt class="function">os.path.abspath</tt></h3><pre class="screen">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput"><span class="pykeyword">import</span> os</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">os.getcwd()</span>                        <a name="regression.path.2.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
<span class="computeroutput">/home/you</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">os.path.abspath(<span class="pystring">''</span>)</span>                <a name="regression.path.2.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
<span class="computeroutput">/home/you</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">os.path.abspath(<span class="pystring">'.ssh'</span>)</span>            <a name="regression.path.2.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
<span class="computeroutput">/home/you/.ssh</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">os.path.abspath(<span class="pystring">'/home/you/.ssh'</span>)</span> <a name="regression.path.2.4"></a><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12">
<span class="computeroutput">/home/you/.ssh</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">os.path.abspath(<span class="pystring">'.ssh/../foo/'</span>)</span>    <a name="regression.path.2.5"></a><img alt="5" border="0" height="12" src="../images/callouts/5.png" width="12">
<span class="computeroutput">/home/you/foo</span></img></img></img></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.2.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top"><tt class="function">os.getcwd()</tt> returns the current working directory.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.2.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">Calling <tt class="function">os.path.abspath</tt> with an empty string returns the current working directory, same as <tt class="function">os.getcwd()</tt>.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.2.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">Calling <tt class="function">os.path.abspath</tt> with a partial pathname constructs a fully qualified pathname out of it, based on the current working directory.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.2.4"><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12"/></a>
</td>
<td align="left" valign="top">Calling <tt class="function">os.path.abspath</tt> with a full pathname simply returns it.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.2.5"><img alt="5" border="0" height="12" src="../images/callouts/5.png" width="12"/></a>
</td>
<td align="left" valign="top"><tt class="function">os.path.abspath</tt> also <span class="emphasis"><em>normalizes</em></span> the pathname it returns.  Note that this example worked even though I don't actually have a 'foo' directory.  <tt class="function">os.path.abspath</tt> never checks your actual disk; this is all just string manipulation.
                     </td>
</tr>
</table>
</div>
</div><a name="os.path.abspath.exist.note"></a><table border="0" class="note" summary="">
<tr>
<td align="center" rowspan="2" valign="top" width="1%"><img alt="Note" height="24" src="../images/note.png" title="" width="24"/></td>
</tr>
<tr>
<td align="left" colspan="2" valign="top" width="99%">The pathnames and filenames you pass to <tt class="function">os.path.abspath</tt> do not need to exist.
               </td>
</tr>
</table><a name="os.path.normpath.note"></a><table border="0" class="note" summary="">
<tr>
<td align="center" rowspan="2" valign="top" width="1%"><img alt="Note" height="24" src="../images/note.png" title="" width="24"/></td>
</tr>
<tr>
<td align="left" colspan="2" valign="top" width="99%"><tt class="function">os.path.abspath</tt> not only constructs full path names, it also normalizes them.  That means that if you are in the <tt class="filename">/usr/</tt> directory, <tt class="literal">os.path.abspath('bin/../local/bin')</tt> will return <tt class="filename">/usr/local/bin</tt>.  It normalizes the path by making it as simple as possible.  If you just want to normalize a pathname like this without
                  turning it into a full pathname, use <tt class="function">os.path.normpath</tt> instead.
               </td>
</tr>
</table>
<div class="example"><a name="d0e35527"></a><h3 class="title">Example&#160;16.5.&#160;Sample output from <tt class="filename">fullpath.py</tt></h3><pre class="screen">
<tt class="prompt">[you@localhost py]$ </tt><span class="userinput">python /home/you/diveintopython/common/py/fullpath.py</span> <a name="regression.path.3.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
<span class="computeroutput">sys.argv[0] = /home/you/diveintopython/common/py/fullpath.py
path = /home/you/diveintopython/common/py
full path = /home/you/diveintopython/common/py</span>
<tt class="prompt">[you@localhost diveintopython]$ </tt><span class="userinput">python common/py/fullpath.py</span>               <a name="regression.path.3.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
<span class="computeroutput">sys.argv[0] = common/py/fullpath.py
path = common/py
full path = /home/you/diveintopython/common/py</span>
<tt class="prompt">[you@localhost diveintopython]$ </tt><span class="userinput">cd common/py</span>
<tt class="prompt">[you@localhost py]$ </tt><span class="userinput">python fullpath.py</span>                                     <a name="regression.path.3.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
<span class="computeroutput">sys.argv[0] = fullpath.py
path = 
full path = /home/you/diveintopython/common/py</span></img></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.3.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">In the first case, <tt class="literal">sys.argv[0]</tt> includes the full path of the script.  You can then use the <tt class="function">os.path.dirname</tt> function to strip off the script name and return the full directory name, and <tt class="function">os.path.abspath</tt> simply returns what you give it.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.3.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">If the script is run by using a partial pathname, <tt class="literal">sys.argv[0]</tt> will still contain exactly what appears on the command line.  <tt class="function">os.path.dirname</tt> will then give you a partial pathname (relative to the current directory), and <tt class="function">os.path.abspath</tt> will construct a full pathname from the partial pathname.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.3.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">If the script is run from the current directory without giving any path, <tt class="function">os.path.dirname</tt> will simply return an empty string.  Given an empty string, <tt class="function">os.path.abspath</tt> returns the current directory, which is what you want, since the script was run from the current directory.
                     </td>
</tr>
</table>
</div>
</div><a name="os.path.abspath.crossplatform.note"></a><table border="0" class="note" summary="">
<tr>
<td align="center" rowspan="2" valign="top" width="1%"><img alt="Note" height="24" src="../images/note.png" title="" width="24"/></td>
</tr>
<tr>
<td align="left" colspan="2" valign="top" width="99%">Like the other functions in the <tt class="filename">os</tt> and <tt class="filename">os.path</tt> modules, <tt class="function">os.path.abspath</tt> is cross-platform.  Your results will look slightly different than my examples if you're running on Windows (which uses backslash
                  as a path separator) or <span class="abbrev">Mac</span> <span class="acronym">OS</span> (which uses colons), but they'll still work.  That's the whole point of the <tt class="filename">os</tt> module.
               </td>
</tr>
</table>
<p><b>Addendum.&#160;</b>One reader was dissatisfied with this solution, and wanted to be able to run all the unit tests in the current directory,
            not the directory where <tt class="filename">regression.py</tt> is located.  He suggests this approach instead:
         </p>
<div class="example"><a name="regression.path.cwd.example"></a><h3 class="title">Example&#160;16.6.&#160;Running scripts in the current directory</h3><pre class="programlisting"><span class="pykeyword">import</span> sys, os, re, unittest

<span class="pykeyword">def</span><span class="pyclass"> regressionTest</span>():
    path = os.getcwd()       <a name="regression.path.4.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
    sys.path.append(path)    <a name="regression.path.4.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
    files = os.listdir(path) <a name="regression.path.4.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
</img></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.4.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">Instead of setting <tt class="varname">path</tt> to the directory where the currently running script is located, you set it to the current working directory instead.  This
                        will be whatever directory you were in before you ran the script, which is not necessarily the same as the directory the script
                        is in. (Read that sentence a few times until you get it.)
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.4.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">Append this directory to the <span class="application">Python</span> library search path, so that when you dynamically import the unit test modules later, <span class="application">Python</span> can find them.  You didn't need to do this when <tt class="varname">path</tt> was the directory of the currently running script, because <span class="application">Python</span> always looks in that directory.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#regression.path.4.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">The rest of the function is the same.</td>
</tr>
</table>
</div>
<p>This technique will allow you to re-use this <tt class="filename">regression.py</tt> script on multiple projects.  Just put the script in a common directory, then change to the project's directory before running
               it.  All of that project's unit tests will be found and tested, instead of the unit tests in the common directory where <tt class="filename">regression.py</tt> is located.
            </p>
</div>
</div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        <table border="0" cellpadding="0" cellspacing="0" class="Footer" summary="" width="100%">
<tr>
<td align="left" width="35%"><br><a class="NavigationArrow" href="index.html">&lt;&lt;&#160;Functional Programming</a></br></td>
<td align="center" width="30%"><br>&#160;<span class="divider">|</span>&#160;<a href="index.html#regression.divein" title="16.1.&#160;Diving in">1</a> <span class="divider">|</span> <span class="thispage">2</span> <span class="divider">|</span> <a href="filtering_lists.html" title="16.3.&#160;Filtering lists revisited">3</a> <span class="divider">|</span> <a href="mapping_lists.html" title="16.4.&#160;Mapping lists revisited">4</a> <span class="divider">|</span> <a href="data_centric.html" title="16.5.&#160;Data-centric programming">5</a> <span class="divider">|</span> <a href="dynamic_import.html" title="16.6.&#160;Dynamically importing modules">6</a> <span class="divider">|</span> <a href="all_together.html" title="16.7.&#160;Putting it all together">7</a> <span class="divider">|</span> <a href="summary.html" title="16.8.&#160;Summary">8</a>&#160;<span class="divider">|</span>&#160;
            </br></td>
<td align="right" width="35%"><br><a class="NavigationArrow" href="filtering_lists.html">Filtering lists revisited&#160;&gt;&gt;</a></br></td>
</tr>
<tr>
<td colspan="3"><br/></td>
</tr>
</table>
        <!-- Footer -->
<div class="Footer">
    <p><a href="https://github.com/pcsforeducation/diveintopython/issues?sort=created&state=open">Report issues<img style="margin-left:10px" height="40" src="../images/logo_github.png"></a></p>
    <p class="copyright">Copyright &copy; 2000, 2001, 2002, 2003, 2004 <a href="mailto:josh@servercobra.com">Mark Pilgrim</a>. Maintained by Josh Gachnang.</p>
</div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1879314568120827";
/* DiveIntoPython */
google_ad_slot = "8002881514";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<!-- End Footer -->
            </div>
        </div>
        <!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9740779-18']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google Analytics -->
        <script src="../js/jquery.js"></script>
        <script src="../js/foundation.min.js"></script>
        <script>
          $(document).foundation();
        </script>
    </body>
</html>