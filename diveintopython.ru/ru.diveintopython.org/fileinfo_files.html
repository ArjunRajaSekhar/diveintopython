
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>3.11. File objects</title><link rel="stylesheet" href="http://web.archive.org/web/20110709015606cs_/http://ru.diveintopython.org/diveintopython.css" type="text/css"><link rev="made" href="mailto:f8dy@diveintopython.org"><meta name="generator" content="DocBook XSL Stylesheets V"><meta name="keywords" content="Python, &#1103;&#1079;&#1099;&#1082; Python, &#1103;&#1079;&#1099;&#1082; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; Python, Dive Into Python, &#1042; &#1075;&#1083;&#1091;&#1073;&#1100; &#1103;&#1079;&#1099;&#1082;&#1072; Python, &#1091;&#1095;&#1077;&#1073;&#1085;&#1080;&#1082;, &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1085;&#1086;-&#1086;&#1088;&#1080;&#1077;&#1085;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1081;, &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;, &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103;, &#1082;&#1085;&#1080;&#1075;&#1072;, free, &#1089;&#1074;&#1086;&#1073;&#1086;&#1076;&#1085;&#1099;&#1081;, &#1073;&#1077;&#1089;&#1087;&#1083;&#1072;&#1090;&#1085;&#1099;&#1081;"><meta name="description" content="a free Python book for experienced programmers"><link rel="home" href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/toc.html" title="&#1042; &#1075;&#1083;&#1091;&#1073;&#1100; &#1103;&#1079;&#1099;&#1082;&#1072; Python"><link rel="up" href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_divein.html" title="&#1043;&#1083;&#1072;&#1074;&#1072; 3. &#1057;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1072; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1085;&#1086;-&#1086;&#1088;&#1080;&#1077;&#1085;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;"><link rel="previous" href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_exception.html" title="3.10. Handling exceptions"><link rel="next" href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_for.html" title="3.12. for loops"></head><body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="http://staticweb.archive.org/js/disclaim-element.js" ></script>
<script type="text/javascript" src="http://staticweb.archive.org/js/graph-calc.js" ></script>
<script type="text/javascript" src="http://staticweb.archive.org/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1325375999999;
var wbPrefix = "http://web.archive.org/web/";
var wbCurrentUrl = "http:\/\/ru.diveintopython.org\/fileinfo_files.html";

var curYear = -1;
var curMonth = -1;
var yearCount = 16;
var firstYear = 1996;
var imgWidth=400;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "9";
var displayMonth = "Jul";
var displayYear = "2011";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(http://staticweb.archive.org/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="http://wayback.archive.org/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="http://staticweb.archive.org/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="http://wayback.archive.org/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ru.diveintopython.org/fileinfo_files.html" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20110709015606" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="http://web.archive.org/web/20100929082658/http://ru.diveintopython.org/fileinfo_files.html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="29 Sep 2010"><strong>SEP</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 1:56:06 Jul 9, 2011">JUL</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Aug
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="http://web.archive.org/web/20100929082658/http://ru.diveintopython.org/fileinfo_files.html" title="8:26:58 Sep 29, 2010" style="background-color:transparent;border:none;"><img src="http://staticweb.archive.org/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 1:56:06 Jul 9, 2011">9</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="http://staticweb.archive.org/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="http://web.archive.org/web/20100323094856/http://ru.diveintopython.org/fileinfo_files.html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="23 Mar 2010"><strong>2010</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 1:56:06 Jul 9, 2011">2011</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2012
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="http://wayback.archive.org/web/20110709015606*/http://ru.diveintopython.org/fileinfo_files.html" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>26 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">15 Jul 04 - 9 Jul 11</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:400px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:400px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="400"
				height="27"
				border="0"
				src="http://wayback.archive.org/jsp/graph.jsp?graphdata=400_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000101010_2005:-1:100000000011_2006:-1:000000100100_2007:-1:110001111100_2008:-1:101010100000_2009:-1:201000000000_2010:-1:101000001000_2011:6:000000100000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="http://staticweb.archive.org/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="http://staticweb.archive.org/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(http://staticweb.archive.org/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(http://staticweb.archive.org/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->
<table id="Header" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td id="breadcrumb" colspan="5" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/index.html">&#1053;&#1072;&#1095;&#1072;&#1083;&#1086;</a>&nbsp;&gt;&nbsp;<a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/toc.html">&#1042; &#1075;&#1083;&#1091;&#1073;&#1100; &#1103;&#1079;&#1099;&#1082;&#1072; Python</a>&nbsp;&gt;&nbsp;<a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_divein.html">&#1057;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1072; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1085;&#1086;-&#1086;&#1088;&#1080;&#1077;&#1085;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;</a>&nbsp;&gt;&nbsp;<b>File objects</b></td><td id="navigation" align="right">&nbsp;&nbsp;&nbsp;<a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_exception.html" title="&#1055;&#1088;&#1077;&#1076;.: &#8220;Handling exceptions&#8221;">&lt;&lt;</a>&nbsp;&nbsp;&nbsp;<a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_for.html" title="&#1057;&#1083;&#1077;&#1076;.: &#8220;for loops&#8221;">&gt;&gt;</a></td></tr><tr><td><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/logo.png" alt="diveinto.python.ru"></td><td colspan="2"><span id="logo">&#1042; &#1075;&#1083;&#1091;&#1073;&#1100; &#1103;&#1079;&#1099;&#1082;&#1072; Python</span><br><span id="tagline">&#1044;&#1083;&#1103; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1089;&#1090;&#1086;&#1074;</span></td><td colspan="3" align="right"></td></tr></table><div class="section"><a name="fileinfo.files"></a><div class="titlepage"><div><h2 class="title"><a name="fileinfo.files"></a>3.11. File objects</h2></div></div><div class="abstract"><p>Python has a built-in function, <tt>open</tt>, for opening a file on disk.  <tt>open</tt> returns a file object, which has methods and attributes for getting information about and manipulating the opened file.</p></div><div class="example"><p><a name="d0e4300"></a><b>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088; 3.23. Opening a file</b></p><pre class="screen"><tt>&gt;&gt;&gt; </tt><span class="userinput">f = open(<span class='pystring'>"/music/_singles/kairo.mp3"</span>, <span class='pystring'>"rb"</span>)</span> <a name="fileinfo.files.1.1"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12">
<tt>&gt;&gt;&gt; </tt><span class="userinput">f</span>                                           <a name="fileinfo.files.1.2"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12">
<span class="computeroutput">&lt;open file '/music/_singles/kairo.mp3', mode 'rb' at 010E3988&gt;</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.mode</span>                                      <a name="fileinfo.files.1.3"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12">
<span class="computeroutput">'rb'</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.name</span>                                      <a name="fileinfo.files.1.4"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12">
<span class="computeroutput">'/music/_singles/kairo.mp3'</span></pre><div class="calloutlist"><a name="d0e4318"></a><table border="0" summary="Callout list"><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.1.1"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>open</tt> method can take up to three parameters: a filename, a mode, and a buffering parameter.  Only the first one, the filename, is required; the other two are <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/apihelper_optional.html" title="2.2. &#1053;&#1077;&#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1077; &#1080; &#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1077; &#1072;&#1088;&#1075;&#1091;&#1084;&#1077;&#1085;&#1090;&#1099;">optional</a>.  If not specified, the file is opened for reading in text mode.  Here we are opening the file for reading in binary mode.  (<tt>print open.__doc__</tt> displays a great explanation of all the possible modes.)</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.1.2"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>open</tt> function returns an object (by now, <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/odbchelper_objects.html" title="1.4. &#1042;&#1089;&#1077; &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1072;&#1084;&#1080;">this should not surprise you</a>).  A file object has several useful attributes.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.1.3"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>mode</tt> attribute of a file object tells you what mode the file was opened in.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.1.4"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>name</tt> attribute of a file object tells you the name of the file that the file object has open.</td></tr></table></div></div><div class="example"><p><a name="d0e4334"></a><b>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088; 3.24. Reading a file</b></p><pre class="screen">
<tt>&gt;&gt;&gt; </tt><span class="userinput">f</span>
<span class="computeroutput">&lt;open file '/music/_singles/kairo.mp3', mode 'rb' at 010E3988&gt;</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.tell()</span>              <a name="fileinfo.files.2.1"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12">
<span class="computeroutput">0</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.seek(-128, 2)</span>       <a name="fileinfo.files.2.2"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12">
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.tell()</span>              <a name="fileinfo.files.2.3"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12">
<span class="computeroutput">7542909</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">tagData = f.read(128)</span> <a name="fileinfo.files.2.4"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12">
<tt>&gt;&gt;&gt; </tt><span class="userinput">tagData</span>
<span class="computeroutput">'TAGKAIRO****THE BEST GOA         ***DJ MARY-JANE***            Rave Mix                      2000http://mp3.com/DJMARYJANE     \037'</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.tell()</span>              <a name="fileinfo.files.2.5"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/5.png" alt="5" border="0" width="12" height="12">
<span class="computeroutput">7543037</span></pre><div class="calloutlist"><a name="d0e4361"></a><table border="0" summary="Callout list"><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.2.1"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12"></a> </td><td valign="top" align="left">A file object maintains state about the file it has open.  The <tt>tell</tt> method of a file object tells you your current position in the open file.  Since we haven't done anything with this file yet, the current position is <tt>0</tt>, which is the beginning of the file.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.2.2"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>seek</tt> method of a file object moves to another position in the open file.  The second parameter specifies what the first one means; <tt>0</tt> means move to an absolute position (counting from the start of the file), <tt>1</tt> means move to a relative position (counting from the current position), and <tt>2</tt> means move to a position relative to the end of the file.  Since the MP3 tags we're looking for are stored at the end of the file, we use <tt>2</tt> and tell the file object to move to a position <tt>128</tt> bytes from the end of the file.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.2.3"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>tell</tt> method confirms that the current file position has moved.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.2.4"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>read</tt> method reads a specified number of bytes from the open file and returns a string with the data which was read.  The optional parameter specifies the maximum number of bytes to read.  If no parameter is specified, <tt>read</tt> will read until the end of the file.  (We could have simply said <tt>read()</tt> here, since we know exactly where we are in the file and we are, in fact, reading the last 128 bytes.)  The read data is assigned to the <tt>tagData</tt> variable, and the current position is updated based on how many bytes were read.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.2.5"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/5.png" alt="5" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>tell</tt> method confirms that the current position has moved.  If you do the math, you'll see that after reading 128 bytes, the position has been incremented by 128.</td></tr></table></div></div><div class="example"><p><a name="d0e4387"></a><b>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088; 3.25. Closing a file</b></p><pre class="screen">
<tt>&gt;&gt;&gt; </tt><span class="userinput">f</span>
<span class="computeroutput">&lt;open file '/music/_singles/kairo.mp3', mode 'rb' at 010E3988&gt;</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.closed</span>  <a name="fileinfo.files.3.1"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12">
<span class="computeroutput">0</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.close()</span> <a name="fileinfo.files.3.2"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12">
<tt>&gt;&gt;&gt; </tt><span class="userinput">f</span>
<span class="computeroutput">&lt;closed file '/music/_singles/kairo.mp3', mode 'rb' at 010E3988&gt;</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.closed</span>
<span class="computeroutput">1</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.seek(0)</span> <a name="fileinfo.files.3.3"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12">
<span class="traceback">Traceback (innermost last):
  File "&lt;interactive input&gt;", line 1, in ?
ValueError: I/O operation on closed file</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.tell()</span>
<span class="traceback">Traceback (innermost last):
  File "&lt;interactive input&gt;", line 1, in ?
ValueError: I/O operation on closed file</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.read()</span>
<span class="traceback">Traceback (innermost last):
  File "&lt;interactive input&gt;", line 1, in ?
ValueError: I/O operation on closed file</span>
<tt>&gt;&gt;&gt; </tt><span class="userinput">f.close()</span> <a name="fileinfo.files.3.4"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12"></pre><div class="calloutlist"><a name="d0e4419"></a><table border="0" summary="Callout list"><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.3.1"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>closed</tt> attribute of a file object indicates whether the object has a file open or not.  In this case, the file is still open (<tt>closed</tt> is <tt>0</tt>).  Open files consume system resources, and depending on the file mode, other programs may not be able to access them.  It's important to close files as soon as you're done with them.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.3.2"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12"></a> </td><td valign="top" align="left">To close a file, call the <tt>close</tt> method of the file object.  This frees the lock (if any) that you were holding on the file, flushes buffered writes (if any) that the system hadn't gotten around to actually writing yet, and releases the system resources.  The <tt>closed</tt> attribute confirms that the file is closed.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.3.3"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12"></a> </td><td valign="top" align="left">Just because a file is closed doesn't mean that the file object ceases to exist.  The variable <tt>f</tt> will continue to exist until it <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_instantiation.html#fileinfo.scope" title="&#1055;&#1088;&#1080;&#1084;&#1077;&#1088; 3.10. &#1055;&#1086;&#1087;&#1099;&#1090;&#1082;&#1072; &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1091;&#1090;&#1077;&#1095;&#1082;&#1091; &#1087;&#1072;&#1084;&#1103;&#1090;&#1080;">goes out of scope</a> or gets manually deleted.  However, none of the methods that manipulate an open file will work once the file has been closed; they all raise an exception.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.3.4"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12"></a> </td><td valign="top" align="left">Calling <tt>close</tt> on a file object whose file is already closed does <span class="emphasis"><i>not</i></span> raise an exception; it fails silently.</td></tr></table></div></div><div class="example"><p><a name="fileinfo.files.incode"></a><b>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088; 3.26. File objects in <tt>MP3FileInfo</tt></b></p><pre class="programlisting">
        <span class='pykeyword'>try</span>:                                <a name="fileinfo.files.4.1"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12">
            fsock = open(filename, <span class='pystring'>"rb"</span>, 0) <a name="fileinfo.files.4.2"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12">
            <span class='pykeyword'>try</span>:                           
                fsock.seek(-128, 2)         <a name="fileinfo.files.4.3"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12">
                tagdata = fsock.read(128)   <a name="fileinfo.files.4.4"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12">
            <span class='pykeyword'>finally</span>:                        <a name="fileinfo.files.4.5"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/5.png" alt="5" border="0" width="12" height="12">
                fsock.close()              
            .
            .
            .
        <span class='pykeyword'>except</span> IOError:                     <a name="fileinfo.files.4.6"></a><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/6.png" alt="6" border="0" width="12" height="12">
            <span class='pykeyword'>pass</span>                           </pre><div class="calloutlist"><a name="d0e4447"></a><table border="0" summary="Callout list"><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.4.1"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/1.png" alt="1" border="0" width="12" height="12"></a> </td><td valign="top" align="left">Because opening and reading files is risky and may raise an exception, all of this code is wrapped in a <tt>try...except</tt> block.  (Hey, isn't <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/odbchelper_indenting.html" title="1.5. &#1054;&#1090;&#1089;&#1090;&#1091;&#1087;&#1099;">standardized indentation</a> great?  This is where you start to appreciate it.)</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.4.2"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/2.png" alt="2" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>open</tt> function may raise an <tt>IOError</tt>.  (Maybe the file doesn't exist.)</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.4.3"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/3.png" alt="3" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>seek</tt> method may raise an <tt>IOError</tt>.  (Maybe the file is smaller than 128 bytes.)</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.4.4"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/4.png" alt="4" border="0" width="12" height="12"></a> </td><td valign="top" align="left">The <tt>read</tt> method may raise an <tt>IOError</tt>.  (Maybe the disk has a bad sector, or it's on a network drive and the network just went down.)</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.4.5"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/5.png" alt="5" border="0" width="12" height="12"></a> </td><td valign="top" align="left">This is new: a <tt>try...finally</tt> block.  Once the file has been opened successfully by the <tt>open</tt> function, we want to make absolutely sure that we close it, even if an exception is raised by the <tt>seek</tt> or <tt>read</tt> methods.  That's what a <tt>try...finally</tt> block is for: code in the <tt>finally</tt> block will <span class="emphasis"><i>always</i></span> be executed, even if something in the <tt>try</tt> block raises an exception.  Think of it as code that gets executed &#8220;on the way out&#8221;, regardless of what happened on the way.</td></tr><tr><td width="12" valign="top" align="left"><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_files.html#fileinfo.files.4.6"><img src="http://web.archive.org/web/20110709015606im_/http://ru.diveintopython.org/images/callouts/6.png" alt="6" border="0" width="12" height="12"></a> </td><td valign="top" align="left">At last, we handle our <tt>IOError</tt> exception.  This could be the <tt>IOError</tt> exception raised by the call to <tt>open</tt>, <tt>seek</tt>, or <tt>read</tt>.  Here, we really don't care, because all we're going to do is ignore it silently and continue.  (Remember, <tt>pass</tt> is a Python statement that <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_class.html#fileinfo.class.simplest" title="&#1055;&#1088;&#1080;&#1084;&#1077;&#1088; 3.5. &#1055;&#1088;&#1086;&#1089;&#1090;&#1077;&#1081;&#1096;&#1080;&#1081; &#1082;&#1083;&#1072;&#1089;&#1089;">does nothing</a>.)  That's perfectly legal; &#8220;handling&#8221; an exception can mean explicitly doing nothing.  It still counts as handled, and processing will continue normally on the next line of code after the <tt>try...except</tt> block.</td></tr></table></div></div><div class="furtherreading"><p><b>Further reading</b></p><ul><li><a href="http://web.archive.org/web/20110709015606/http://www.python.org/doc/current/tut/tut.html"><i>Python Tutorial</i></a> discusses reading and writing files, including how to <a href="http://web.archive.org/web/20110709015606/http://www.python.org/doc/current/tut/node9.html#SECTION009210000000000000000">read a file one line at a time into a list</a>.</li><li><a href="http://web.archive.org/web/20110709015606/http://www.effbot.org/guides/">eff-bot</a> discusses efficiency and performance of <a href="http://web.archive.org/web/20110709015606/http://www.effbot.org/guides/readline-performance.htm">various ways of reading a file</a>.</li><li><a href="http://web.archive.org/web/20110709015606/http://www.faqts.com/knowledge-base/index.phtml/fid/199/">Python Knowledge Base</a> answers <a href="http://web.archive.org/web/20110709015606/http://www.faqts.com/knowledge-base/index.phtml/fid/552">common questions about files</a>.</li><li><a href="http://web.archive.org/web/20110709015606/http://www.python.org/doc/current/lib/"><i>Python Library Reference</i></a> summarizes <a href="http://web.archive.org/web/20110709015606/http://www.python.org/doc/current/lib/bltin-file-objects.html">all the file object methods</a>.</li></ul></div></div><table class="Footer" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td width="35%" align="left"><br><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_exception.html"><span class="NavigationArrow">&lt;&lt;</span>&nbsp;Handling exceptions</a></td><td width="30%" align="center"><br>&nbsp;<a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_divein.html#fileinfo.divein" title="3.1. &#1042; &#1075;&#1083;&#1091;&#1073;&#1100;">1</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_fromimport.html" title="3.2. &#1048;&#1084;&#1087;&#1086;&#1088;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1084;&#1086;&#1076;&#1091;&#1083;&#1077;&#1081; &#1080;&#1085;&#1089;&#1090;&#1088;&#1091;&#1082;&#1094;&#1080;&#1077;&#1081; from module import">2</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_class.html" title="3.3. &#1054;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1077; &#1082;&#1083;&#1072;&#1089;&#1089;&#1086;&#1074;">3</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_instantiation.html" title="3.4. &#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1086;&#1074; &#1082;&#1083;&#1072;&#1089;&#1089;&#1086;&#1074;">4</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_userdict.html" title="3.5. UserDict: a wrapper class">5</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_specialmethods.html" title="3.6. Special class methods">6</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_morespecial.html" title="3.7. Advanced special class methods">7</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_classattributes.html" title="3.8. Class attributes">8</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_private.html" title="3.9. Private functions">9</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_exception.html" title="3.10. Handling exceptions">10</a> <b>11</b> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_for.html" title="3.12. for loops">12</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_modules.html" title="3.13. More on modules">13</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_os.html" title="3.14. The os module">14</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_alltogether.html" title="3.15. Putting it all together">15</a> <a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_summary.html" title="3.16. Summary">16</a>&nbsp;</td><td width="35%" align="right"><br><a href="http://web.archive.org/web/20110709015606/http://ru.diveintopython.org/fileinfo_for.html">for loops&nbsp;<span class="NavigationArrow">&gt;&gt;</span></a></td></tr><tr><td colspan="3"><br></td></tr></table><table class="Footer" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td align="left"><p class="copyright">Copyright &copy; 2000, 2001, 2002 <a href="mailto:f8dy@diveintopython.org">&#1052;&#1072;&#1088;&#1082; &#1055;&#1080;&#1083;&#1075;&#1088;&#1080;&#1084;</a></p><p class="copyright">Copyright &copy; 2001, 2002, 2003 &#1055;&#1077;&#1088;&#1077;&#1074;&#1086;&#1076;, <a href="mailto:ods@strana.ru">&#1044;&#1077;&#1085;&#1080;&#1089; &#1054;&#1090;&#1082;&#1080;&#1076;&#1072;&#1095;</a></p></td><td align="left">&nbsp;</td></tr></table></body></html>





<!--
     FILE ARCHIVED ON 1:56:06 Jul 9, 2011 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 19:32:41 Nov 4, 2011.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
